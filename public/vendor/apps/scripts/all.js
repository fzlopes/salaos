var AppCalendar=function(){return{init:function(){this.initCalendar()},initCalendar:function(){if(jQuery().fullCalendar){var e=new Date,t=e.getDate(),n=e.getMonth(),a=e.getFullYear(),o={};App.isRTL()?$("#calendar").parents(".portlet").width()<=720?($("#calendar").addClass("mobile"),o={right:"title, prev, next",center:"",left:"agendaDay, agendaWeek, month, today"}):($("#calendar").removeClass("mobile"),o={right:"title",center:"",left:"agendaDay, agendaWeek, month, today, prev,next"}):$("#calendar").parents(".portlet").width()<=720?($("#calendar").addClass("mobile"),o={left:"title, prev, next",center:"",right:"today,month,agendaWeek,agendaDay"}):($("#calendar").removeClass("mobile"),o={left:"title",center:"",right:"prev,next,today,month,agendaWeek,agendaDay"});var i=function(e){var t={title:$.trim(e.text())};e.data("eventObject",t),e.draggable({zIndex:999,revert:!0,revertDuration:0})},l=function(e){e=0===e.length?"Untitled Event":e;var t=$('<div class="external-event label label-default">'+e+"</div>");jQuery("#event_box").append(t),i(t)};$("#external-events div.external-event").each(function(){i($(this))}),$("#event_add").unbind("click").click(function(){var e=$("#event_title").val();l(e)}),$("#event_box").html(""),l("My Event 1"),l("My Event 2"),l("My Event 3"),l("My Event 4"),l("My Event 5"),l("My Event 6"),$("#calendar").fullCalendar("destroy"),$("#calendar").fullCalendar({header:o,defaultView:"month",slotMinutes:15,editable:!0,droppable:!0,drop:function(e,t){var n=$(this).data("eventObject"),a=$.extend({},n);a.start=e,a.allDay=t,a.className=$(this).attr("data-class"),$("#calendar").fullCalendar("renderEvent",a,!0),$("#drop-remove").is(":checked")&&$(this).remove()},events:[{title:"All Day Event",start:new Date(a,n,1),backgroundColor:App.getBrandColor("yellow")},{title:"Long Event",start:new Date(a,n,t-5),end:new Date(a,n,t-2),backgroundColor:App.getBrandColor("green")},{title:"Repeating Event",start:new Date(a,n,t-3,16,0),allDay:!1,backgroundColor:App.getBrandColor("red")},{title:"Repeating Event",start:new Date(a,n,t+4,16,0),allDay:!1,backgroundColor:App.getBrandColor("green")},{title:"Meeting",start:new Date(a,n,t,10,30),allDay:!1},{title:"Lunch",start:new Date(a,n,t,12,0),end:new Date(a,n,t,14,0),backgroundColor:App.getBrandColor("grey"),allDay:!1},{title:"Birthday Party",start:new Date(a,n,t+1,19,0),end:new Date(a,n,t+1,22,30),backgroundColor:App.getBrandColor("purple"),allDay:!1},{title:"Click for Google",start:new Date(a,n,28),end:new Date(a,n,29),backgroundColor:App.getBrandColor("yellow"),url:"http://google.com/"}]})}}}}();jQuery(document).ready(function(){AppCalendar.init()});var AppInbox=function(){var e=$(".inbox-content"),t="",n=function(n,a){var o="app_inbox_inbox.html",i=n.attr("data-title");t=a,App.blockUI({target:e,overlayColor:"none",animate:!0}),d(n),$.ajax({type:"GET",cache:!1,url:o,dataType:"html",success:function(t){d(n),App.unblockUI(".inbox-content"),$(".inbox-nav > li.active").removeClass("active"),n.closest("li").addClass("active"),$(".inbox-header > h1").text(i),e.html(t),Layout.fixContentHeight&&Layout.fixContentHeight()},error:function(e,t,a){d(n)},async:!1}),jQuery("body").on("change",".mail-group-checkbox",function(){var e=jQuery(".mail-checkbox"),t=jQuery(this).is(":checked");jQuery(e).each(function(){$(this).attr("checked",t)})})},a=function(t,n,a){var o="app_inbox_view.html";App.blockUI({target:e,overlayColor:"none",animate:!0}),d(t);var i=t.parent("tr").attr("data-messageid");$.ajax({type:"GET",cache:!1,url:o,dataType:"html",data:{message_id:i},success:function(n){App.unblockUI(e),d(t),a&&$(".inbox-nav > li.active").removeClass("active"),$(".inbox-header > h1").text("View Message"),e.html(n),Layout.fixContentHeight()},error:function(e,n,a){d(t)},async:!1})},o=function(){$(".inbox-wysihtml5").wysihtml5({stylesheets:["../assets/global/plugins/bootstrap-wysihtml5/wysiwyg-color.css"]})},i=function(){$("#fileupload").fileupload({url:"../assets/global/plugins/jquery-file-upload/server/php/",autoUpload:!0}),$.support.cors&&$.ajax({url:"../assets/global/plugins/jquery-file-upload/server/php/",type:"HEAD"}).fail(function(){$('<span class="alert alert-error"/>').text("Upload server currently unavailable - "+new Date).appendTo("#fileupload")})},l=function(t){var n="app_inbox_compose.html";App.blockUI({target:e,overlayColor:"none",animate:!0}),d(t),$.ajax({type:"GET",cache:!1,url:n,dataType:"html",success:function(n){App.unblockUI(e),d(t),$(".inbox-nav > li.active").removeClass("active"),$(".inbox-header > h1").text("Compose"),e.html(n),i(),o(),$(".inbox-wysihtml5").focus(),Layout.fixContentHeight()},error:function(e,n,a){d(t)},async:!1})},r=function(t){var n=($(t).attr("data-messageid"),"app_inbox_reply.html");App.blockUI({target:e,overlayColor:"none",animate:!0}),d(t),$.ajax({type:"GET",cache:!1,url:n,dataType:"html",success:function(n){App.unblockUI(e),d(t),$(".inbox-nav > li.active").removeClass("active"),$(".inbox-header > h1").text("Reply"),e.html(n),$('[name="message"]').val($("#reply_email_content_body").html()),c(),i(),o(),Layout.fixContentHeight()},error:function(e,n,a){d(t)},async:!1})},c=function(){var e=$(".inbox-compose .mail-to .inbox-cc"),t=$(".inbox-compose .input-cc");e.hide(),t.show(),$(".close",t).click(function(){t.hide(),e.show()})},s=function(){var e=$(".inbox-compose .mail-to .inbox-bcc"),t=$(".inbox-compose .input-bcc");e.hide(),t.show(),$(".close",t).click(function(){t.hide(),e.show()})},d=function(e){"undefined"!=typeof e&&(e.attr("disabled")?e.attr("disabled",!1):e.attr("disabled",!0))};return{init:function(){$(".inbox").on("click",".compose-btn",function(){l($(this))}),$(".inbox").on("click",".inbox-discard-btn",function(e){e.preventDefault(),n($(this),t)}),$(".inbox").on("click",".reply-btn",function(){r($(this))}),$(".inbox").on("click",".view-message",function(){a($(this))}),$(".inbox-nav > li > a").click(function(){n($(this),"inbox")}),$(".inbox-content").on("click",".mail-to .inbox-cc",function(){c()}),$(".inbox-content").on("click",".mail-to .inbox-bcc",function(){s()}),"view"===App.getURLParameter("a")?a():"compose"===App.getURLParameter("a")?l():$(".inbox-nav > li:first > a").click()}}}();jQuery(document).ready(function(){AppInbox.init()});var AppTodo2=function(){var e=function(){$(".todo-taskbody-due").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0}),$(".todo-taskbody-tags").select2({placeholder:"Status"})},t=function(){App.getViewPort().width<=992?$(".todo-project-list-content").addClass("collapse"):$(".todo-project-list-content").removeClass("collapse").css("height","auto")};return{init:function(){e(),t(),App.addResizeHandler(function(){t()})}}}();App.isAngularJsApp()===!1&&jQuery(document).ready(function(){AppTodo2.init()});var AppTodo=function(){var e=function(){$(".todo-taskbody-due").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0}),$(".todo-taskbody-tags").select2({tags:["Testing","Important","Info","Pending","Completed","Requested","Approved"]})},t=function(){App.getViewPort().width<=992?$(".todo-project-list-content").addClass("collapse"):$(".todo-project-list-content").removeClass("collapse").css("height","auto")};return{init:function(){e(),t(),App.addResizeHandler(function(){t()})}}}();jQuery(document).ready(function(){AppTodo.init()});